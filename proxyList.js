import axios from 'axios';
import { HttpsProxyAgent } from 'https-proxy-agent';

// 81.161.5.236
// 19117
// matwilland
// RrHb4GAf8V
const proxyList = [
  "185.162.231.237:80",
  "199.34.230.33:80",
  "141.101.120.37:80",
  "104.18.197.95:80",
  "103.169.142.220:80",
  "46.254.92.45:80",
  "45.131.210.34:80",
  "31.43.179.72:80",
  "185.193.28.117:80",
  "198.41.200.188:80",
  "209.46.30.36:80",
  "104.254.140.37:80",
  "45.131.211.148:80",
  "104.16.0.24:80",
  "172.64.146.52:80",
  "103.169.142.67:80",
  "5.182.34.226:80",
  "104.27.26.183:80",
  "46.254.93.247:80",
  "188.42.88.117:80",
  "104.24.52.64:80",
  "188.42.89.205:80",
  "45.159.217.34:80",
  "45.131.211.179:80",
  "185.162.228.93:80",
  "104.21.84.213:80",
  "172.67.204.84:80",
  "104.17.49.44:80",
  "45.80.108.174:80",
  "185.193.29.180:80",
  "103.160.204.102:80",
  "185.162.231.239:80",
  "45.131.211.200:80",
  "23.227.39.242:80",
  "45.131.208.222:80",
  "23.227.60.173:80",
  "162.159.242.59:80",
  "195.85.23.191:80",
  "104.16.242.74:80",
  "104.17.6.160:80",
  "209.46.30.130:80",
  "46.254.93.11:80",
  "104.16.246.160:80",
  "103.21.244.184:80",
  "104.24.229.222:80",
  "172.67.221.10:80",
  "185.162.230.116:80",
  "104.239.72.87:80",
  "182.253.37.83:443",
  "172.64.85.92:80"
];

async function checkProxy(proxy) {
  const agent = new HttpsProxyAgent(`https://${proxy}`);
  try {
    const res = await axios.get('https://api.ipify.org?format=json', {
      httpAgent: agent,
      timeout: 5000
    });
    console.log(`✅ Proxy works: ${proxy} - IP seen as: ${res.data.ip}`);
  } catch (err) {
    console.log(`❌ Proxy failed: ${proxy} - ${err.message}`);
  }
}

(async () => {
  for (const proxy of proxyList) {
    await checkProxy(proxy);
  }
})();
